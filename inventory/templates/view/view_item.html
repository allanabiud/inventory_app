{% extends 'layouts/home-base.html' %}
{% load static %}
{% block title %}View Item - Stockflow{% endblock %}
{% block content %}
  <div class="container-fluid mt-3 slide-in-left">
    <div class="card p-0 mx-auto shadow-sm overflow-hidden d-flex flex-column">
      <div class="p-5 pb-1 d-flex justify-content-between align-items-center border-0">
        <h4 class="mb-0">Item Details: {{ item.name }}</h4>
        <div class="d-flex align-items-center gap-2">
          <a href="{% url 'edit_item' item.pk %}" class="btn btn-sm btn-success">
            <i class="bi bi-pencil-square me-1"></i> Edit Item
          </a>
          <button type="button"
                  class="btn btn-sm btn-danger"
                  data-bs-toggle="modal"
                  data-bs-target="#deleteItemModal">
            <i class="bi bi-trash me-1"></i> Delete Item
          </button>
          <a href="{% url 'items' %}">
            <i class="bi bi-x-lg fs-4"></i>
          </a>
        </div>
      </div>
      <div class="card-body px-5 pt-3">
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-4" id="itemTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active"
                    id="details-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#details-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="details-tab-pane"
                    aria-selected="true">Details</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link"
                    id="transactions-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#transactions-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="transactions-tab-pane"
                    aria-selected="false">Transactions</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link"
                    id="statistics-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#statistics-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="statistics-tab-pane"
                    aria-selected="false">Statistics</button>
          </li>
        </ul>
        <div class="tab-content" id="itemTabContent">
          <!-- Details Tab -->
          <div class="tab-pane fade show active"
               id="details-tab-pane"
               role="tabpanel"
               aria-labelledby="details-tab"
               tabindex="0">{% include "partials/tabs/item_details.html" %}</div>
          <!-- Transactions Tab -->
          <div class="tab-pane fade"
               id="transactions-tab-pane"
               role="tabpanel"
               aria-labelledby="transactions-tab"
               tabindex="0">{% include "partials/tabs/item_transactions.html" %}</div>
          <!-- Statistics Tab -->
          <div class="tab-pane fade"
               id="statistics-tab-pane"
               role="tabpanel"
               aria-labelledby="statistics-tab"
               tabindex="0">{% include "partials/tabs/item_statistics.html" %}</div>
        </div>
      </div>
      {# end card-body #}
    </div>
    {# end card #}
  </div>
  {# end container-fluid #}
  {# Delete Item Modal (remains unchanged as it uses standard Bootstrap components) #}
  <div class="modal fade"
       id="deleteItemModal"
       tabindex="-1"
       aria-labelledby="deleteItemModalLabel"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteItemModalLabel">Confirm Delete</h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete "<strong>{{ item.name }}</strong>"? This action cannot be undone.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <form action="{% url 'delete_item' item.pk %}"
                method="post"
                class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
